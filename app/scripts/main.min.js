var game={},board=document.getElementById("board"),blackSquare=document.getElementsByClassName("white"),whiteSquare=document.getElementsByClassName("white"),white=0,black=0,Possible=new Array;document.getElementsByClassName||(document.getElementsByClassName=function(t){for(var e,a=document.getElementsByTagName("*"),i=[],r=0;e=a[r++];)e.className==t?i[i.length]=e:null;return i}),function(){return game.squareColor=function(t,e){return color=Math.abs((t+e)%2),color>0?color="black":color="white",color},game.eatPart=function(t){del=document.getElementById(t),type=del.getAttribute("type"),del.removeAttribute("type"),del.removeAttribute("onclick"),del.removeAttribute("part"),del.removeAttribute("dama"),del.innerHTML="","b"===type&&(black++,document.getElementById("PlacarBlack").innerHTML+="<span>(0)</span>"),"w"===type&&(document.getElementById("PlacarWhite").innerHTML+="<span>(0)</span>",white++),document.getElementById("Placar").innerHTML="Brancas "+white+" X "+black+" Pretas",12===white&&alert("As peças brancas venceram!!"),12===black&&alert("As peças pretas venceram!!")},game.makeSquare=function(t){var e=document.getElementById("row_"+t);for(s=1;s<9;s++)e.innerHTML+="<div id='sq_"+t+"_"+s+"' class='square "+game.squareColor(t,s)+"' row='"+t+"' sq='"+s+"'></div>"},game.table=function(){for(i=1;i<9;i++)board.innerHTML+="<div id='row_"+i+"' class='row' row='"+i+"'></div>",game.makeSquare(i)},game.takePart=function(){p=1;for(var t=0;12>t;t++)row=blackSquare[t].getAttribute("row"),sq=blackSquare[t].getAttribute("sq"),blackSquare[t].innerHTML+="<span class='partblack'>(0)</span>",blackSquare[t].setAttribute("part",p),blackSquare[t].setAttribute("type","b"),blackSquare[t].setAttribute("dama",!1),blackSquare[t].setAttribute("onclick","game.possibleMove("+p+","+row+","+sq+",'b',this.id)"),p++;p=1;for(var t=20;32>t;t++)row=whiteSquare[t].getAttribute("row"),sq=whiteSquare[t].getAttribute("sq"),whiteSquare[t].innerHTML+="<span class='partWhite'>(0)</span>",whiteSquare[t].setAttribute("part",p),whiteSquare[t].setAttribute("type","w"),whiteSquare[t].setAttribute("dama",!1),whiteSquare[t].setAttribute("onclick","game.possibleMove("+p+","+row+","+sq+",'w',this.id)"),p++},game.clearActive=function(){for(var t=0;t<whiteSquare.length;t++)whiteSquare[t].setAttribute("class","square white"),1!=whiteSquare[t].hasAttribute("part")&&whiteSquare[t].removeAttribute("onclick")},game.possibleMove=function(t,e,a,i,r){if(game.clearActive(),oldPos=document.getElementById(r),dama=oldPos.getAttribute("dama"),"true"===dama){dow=e+1,up=e-1,right=a+1,rightUp=a+1,leftUp=a-1,left=a-1,obstacleL=0,obstacleR=0,obstacleUpR=0,obstacleUpL=0,DamaType=oldPos.getAttribute("type");for(var s=up;s>0;s--)if(leftUp>0){if(nextDamaL=document.getElementById("sq_"+s+"_"+leftUp),nextDamaL.hasAttribute("part")){if(tipo=nextDamaL.getAttribute("type"),tipo==DamaType){enemy="0";break}if(enemy="sq_"+s+"_"+leftUp,obstacleUpL>1)break;obstacleUpL++}else nextDamaL.setAttribute("class",existingClassLeft+" active"),nextDamaL.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+leftUp+",'"+enemy+"','"+i+"')");leftUp--}for(var s=up;s>0;s--)if(w=Math.abs((s+rightUp)%2),rightUp<9){if(nextDamaR=document.getElementById("sq_"+s+"_"+rightUp),nextDamaR.hasAttribute("part")){if(tipo=nextDamaR.getAttribute("type"),tipo==DamaType){enemy="0";break}if(enemy="sq_"+s+"_"+right,obstacleUpR>1)break;obstacleUpR++}else nextDamaR.setAttribute("class",existingClassLeft+" active"),nextDamaR.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+rightUp+",'"+enemy+"','"+i+"')");rightUp++}for(var s=dow;9>s;s++)if(w=Math.abs((s+right)%2),right<9){if(nextDamaR=document.getElementById("sq_"+s+"_"+right),nextDamaR.hasAttribute("part")){if(tipo=nextDamaR.getAttribute("type"),tipo==DamaType){enemy="0";break}if(enemy="sq_"+s+"_"+right,obstacleR>1)break;obstacleR++}else nextDamaR.setAttribute("class",existingClassLeft+" active"),nextDamaR.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+right+",'"+enemy+"','"+i+"')");right++}for(var s=dow;9>s&&left>0;s++){if(nextDamaL=document.getElementById("sq_"+s+"_"+left),nextDamaL.hasAttribute("part")){if(tipoL=nextDamaL.getAttribute("type"),tipoL==DamaType){enemy="0";break}if(enemy="sq_"+s+"_"+left,obstacleL>1)break;obstacleL++}else nextDamaL.setAttribute("class",existingClassLeft+" active"),nextDamaL.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+left+",'"+enemy+"','"+i+"')");left--}}else{if("w"==i&&(mTop=e-1),"b"==i&&(mTop=e+1),mRight=a+1,mLeft=a-1,partType=oldPos.getAttribute("type"),"b"===partType){enemy="0",obstacleL=0,obstacleR=0;for(var s=mTop;9>s&&mLeft>0;s++){if(nextL=document.getElementById("sq_"+s+"_"+mLeft),existingClassLeft=nextL.getAttribute("class"),!nextL.hasAttribute("part")){if(obstacleL>1)break;nextL.setAttribute("class",existingClassLeft+" active"),nextL.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+mLeft+",'"+enemy+"','"+i+"')");break}if(tipoL=nextL.getAttribute("type"),tipoL==partType)break;enemy="sq_"+s+"_"+mLeft,obstacleL++,mLeft--}enemy="0";for(var s=mTop;9>s&&mRight<9;s++){if(nextR=document.getElementById("sq_"+s+"_"+mRight),existingClassLeft=nextR.getAttribute("class"),!nextR.hasAttribute("part")){if(obstacleR>1)break;nextR.setAttribute("class",existingClassLeft+" active"),nextR.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+mRight+",'"+enemy+"','"+i+"')");break}if(tipoR=nextR.getAttribute("type"),tipoR==partType)break;enemy="sq_"+s+"_"+mRight,obstacleR++,mRight++}}if("w"===partType){enemy="0",obstacleL=0,obstacleR=0;for(var s=mTop;s>0&&mLeft>0;s--){if(nextL=document.getElementById("sq_"+s+"_"+mLeft),existingClassLeft=nextL.getAttribute("class"),!nextL.hasAttribute("part")){if(obstacleL>1)break;nextL.setAttribute("class",existingClassLeft+" active"),nextL.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+mLeft+",'"+enemy+"','"+i+"')");break}if(tipoL=nextL.getAttribute("type"),tipoL==partType)break;enemy="sq_"+s+"_"+mLeft,obstacleL++,mLeft--}enemy="0";for(var s=mTop;s>0&&mRight<9;s--){if(nextR=document.getElementById("sq_"+s+"_"+mRight),existingClassLeft=nextR.getAttribute("class"),!nextR.hasAttribute("part")){if(obstacleR>1)break;nextR.setAttribute("class",existingClassLeft+" active"),nextR.setAttribute("onclick","game.partMove(this.id,"+r+",sq_"+s+"_"+mRight+",'"+enemy+"','"+i+"')");break}if(tipoR=nextR.getAttribute("type"),tipoR==partType)break;enemy="sq_"+s+"_"+mRight,obstacleR++,mRight++}}}},game.partMove=function(t,e,a,i,r){move=document.getElementById(t),"object"==typeof a&&(tipo=a.getAttribute("type"),tipo==r&&(a.removeAttribute("onclick"),a.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'"+tipo+"',this.id)"))),old=document.getElementById(e.id),part=e.getAttribute("part"),game.clearActive(),old.removeAttribute("onclick"),old.removeAttribute("type"),move.setAttribute("part",part),row=move.getAttribute("row"),sq=move.getAttribute("sq"),"w"==r?1==row?(move.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'w',this.id)"),move.innerHTML+="<span class='partWhite'>(D)</span>",move.setAttribute("type","w"),move.setAttribute("dama",!0)):"true"===old.getAttribute("dama")?(move.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'w',this.id)"),move.innerHTML+="<span class='partWhite'>(D)</span>",move.setAttribute("type","w"),move.setAttribute("dama",!0)):(move.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'w',this.id)"),move.innerHTML+="<span class='partWhite'>(0)</span>",move.setAttribute("type","w"),move.setAttribute("dama",!1)):8==row?(move.innerHTML+="<span class='partBlack'>(D)</span>",move.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'b',this.id)"),move.setAttribute("type","b"),move.setAttribute("dama",!0)):"true"===old.getAttribute("dama")?(move.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'b',this.id)"),move.innerHTML+="<span class='partBlack'>(D)</span>",move.setAttribute("type","b"),move.setAttribute("dama",!0)):(move.setAttribute("onclick","game.possibleMove("+part+","+row+","+sq+",'b',this.id)"),move.innerHTML+="<span class='partBlack'>(0)</span>",move.setAttribute("type","b"),move.setAttribute("dama",!1)),old.removeAttribute("dama"),old.innerHTML="",old.removeAttribute("part"),"0"!=i&&game.eatPart(i)},game.start=function(){game.table(),game.takePart(),document.getElementById("Placar").innerHTML="Brancas "+white+" X "+black+" Pretas"},game.start()}();